<link rel="stylesheet" href="/css/card.css">

<% projects.forEach(project => { %>
    <article class="card" id=<%=project.slug%> >
        <% if (project.image != null) { %>
            <img src= <%= project.image %> />
        <% }%>
        <div class="card-content">
            <h1><%= project.title %></h1>
            <p class="date">
            <%= new Intl.DateTimeFormat("en-US", { month: "short", year: "numeric" }).format(project.date) %>
            </p>
            <% if (project.snippet != null) { %>
                <p><%= project.snippet %></p>
            <% } else { %>
                <p><%= project.content.substr(0,80)%>... <a href="#">read more</a> </p>
            <% } %>
        </div>
    </article>
<% }); %>

<script>
    let projects = document.getElementsByClassName('card');
        Array.from(projects).forEach(project => {
                project.addEventListener('click', (event) => {
                        let slug = event.target.closest(".card").id;
                        window.location = '/projects/' + slug;
                    });
            });
</script>
